
version: '3.8'

services:
  kid-ai-teacher:
    image: node:20-alpine
    container_name: kid_ai_teacher
    restart: always
    ports:
      - "50000:50000"
    environment:
      # Tên biến phải là GEMINI_API_KEY để vite.config.ts nhận diện được
      - GEMINI_API_KEY=AIzaSyCzk9WrtTRQe1xsffRMk68ytP6EsrFdfPo
    volumes:
      - .:/app
    working_dir: /app
    # Sử dụng vite để biên dịch TSX trực tiếp trên server
    command: sh -c "npm install && npx vite --port 50000 --host"
